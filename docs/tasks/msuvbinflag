

Description

    Warning

    WARNING: This task is currently experimental.

    Msuvbinflag is automatic flagging algorithm for the identification of Radio Frequency Interference (RFI) in the UV plane for experimental purpose. The visibilities in input CASA Measurements Set (MS) is first gridded into an uniformed UV plane with msuvbin task. Then the significant outliers are computed for entire UV grid based on the criterional settings configurable by users for three method options: radian, diffential and regional mean. After computing flags for each visibility in each uniformed UV bin, the visibilities are transformed reverslity back to original order in the MS file with flagging information. The first msuvbinflag release version is for NRAO internal use to evaluate the speed and numarical analysis performance.   

    Parameter descriptions

    vis

    Name of input visibility file

    field

    Field name list; note that this position will define the phase center of the output uv grid

    spw

    Spectral window selection

    taql

    TaQl expression for data selection (see Data Selection in a Measurement Set or CASAcore NOTE 199: Table Query Language for more information)

    outvis

    Name of output grid

    phasecenter

    Phase center of the grid, to be used when the phase center of the selected field is not the desired output phase center. Example: phasecenter='J2000 18h03m04 -20d00m45.1'

    nx

    Number of pixels along the x axis of the grid. Default: 1000

    ny

    Number of pixels along the y axis of the grid. Default: 1000

    cell

    Cellsize of the grid (given in sky units). Default: '1arcsec'

    ncorr

    Number of correlation/polarization plane in uv grid (allowed 1, 2, 4). For example, if the input data set has the correlations RR and LL, and ncorr =1, then the output uv grid will be written as Stokes I. If ncorr= 2, then the output grid will have both the RR and LL correlations. Default: 1

    nchan

    Number of spectral channels in the output uv grid. Default: 1

    fstart

    Frequency of the first channel. Default: '1GHz' (the user needs to give a useful input here)

    fstep

    Width of spectral channel. Default: '1kHz'

    wproject

    Do wprojection correction while gridding. Default: False

    memfrac

    Controls how much of computer's memory is available for gridding. Default=0.5

Examples

    Let's assume we have multi-epoch observations on a particular field of interest with measurement sets vis_1.ms, vis_2.ms, ... vis_n.ms. The task msuvbin needs to be executed n times, one for each input data set with all the other parameters that define the output data set intact. For instance, for the 1st execution of msuvbin, one may set the following parameters:

    vis = 'vis_1.ms'
     field = '0'
    spw = ''
    taql = ''
    outvis = "uvgrid.ms'
    phasecenter = ''
    nx = 2048
    ny = 2048
    cell = '2.0arcsec'
    ncorr = 2
    nchan = 320
    fstart = "1025.00MHz"
    fstep = "62.5kHz"
    wproject = False
    memfrac = 0.9

    Here we note the following:

        Field '0' was selected from the input data, and its position will define the phase center of the output uv grid. If another position is desired for the phase center, then the parameter phasecenter needs to be specified.
        nx and ny define the number of the pixels along the x and y axes of the grid, respectively. The size of each pixel is defined by the parameter cell. These would be the same values that one would use in the task clean/tclean for imsize and cell to image the output uv grid, and therefore need to be set by taking into account the image that one will eventually be making.
        ncorr defines the number of the correlations in the output uv grid. If the input data set has the correlations RR and LL, and ncorr is set to 1, then the output uv grid will be written as Stokes I. If ncorr is set to 2, then the output grid will have both the RR and LL correlations.
        nchan determines the number of channels in the output uv grid with a frequency width per channel set by the parameter fstep. The lowest frequency of the output data is set by the parameter fstart. Note that msuvbin will perform on the fly Doppler correction; the resulting grid will be in the LSRK frame. The fstart value is the starting frequency in the LSRK frame. The above example will produce a uv grid with 320 channels starting at 1025 MHz in LSRK, with each channel having a width of 62.5 kHz.
        memfrac may be used to set how much memory the task should use. In the above example 90% of the available memory will be utilized by the task.

    After gridding the 1st data set, the task msuvbin will need to be executed on the other data sets one at a time by changing the vis parameter only (i.e., vis='vis_2.ms', then vis='vis_3.ms', etc...) and keeping the other parameters intact. The task msuvbin will perform the proper averaging when gridding the data sets on the same uv grid. The volume of the output data set stays the same regardless of how many measurement sets are added onto the same grid.

Development
    No additional development details

