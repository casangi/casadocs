

.. _Description:

Description

   editor comment: the following warning seems to be outdated. There is no current KI issues listed for fixplanets

   .. warning:: There are `Known Issues <../../notebooks/introduction.html#Known-Issues>`__ for fixplanets.
   
   The main purpose of this task is to correct observations which
   were performed with correct pointing and correlation but for which
   incorrect direction information was entered in the FIELD and
   SOURCE table of the MS. This may be the case if the data is old
   and there is no ephemeris table attached to the MS (in which case,
   use **fixplanets** with the parameter *direction* set in order to
   attach one), if improved ephemerides have become available, or
   if a fixed direction is needed to allow concatenation (using
   **fixplanets** as an alternative to **concat**).
   
   If you actually want to change the phase center of the visibilties
   in an MS, you should use task **fixvis**.

   ..warning:: In cases the MS already has ephemeris table(s) which are used by the correlator attached,
   running fixplanets with a new ephemeris table specified will replace the internal link for ephemeris data to be
   used for the specified field to the new one. Unless the new ephemeris table is the one used in phase tracking by the correlator
   at the time of the observation, subsequent procesing such as imaging may leads to wrong results. In tclean, one can specify
   an external ephemeris table for 'de-blur' the image.

   .. rubric:: Parameter descriptions

   *vis*

   Name of the input visibility set.
   
   *field*

   Field selection string.
   
   *fixuvw*

   Recalculates the uvw coordinates (default: False).
   
   *direction*
   
   If set, **fixplanets** doesn't use the pointing table but sets the
   direction to this value.
   
   default= '' (use pointing table); example: 'J2000 19h30m00
   -40d00m00'.
   
   The direction can either be given explicitly or as the path to a
   JPL Horizons ephemeris table, which is generated by running **getephemtable**.
   

   *refant*
   
   If using pointing table information, use it from this antenna.
   default: 0 (antenna id 0); examples: 'DV06' (antenna with name
   DV06); 3 (antenna id 3).
   
   *reftime*

   If using pointing table information, use it from this timestamp.
   default: 'first'; examples: 'median' will use the median timestamp
   for the given field using only the unflagged maintable rows;
   '2012/07/11/08:41:32' will use the given timestamp (must be within
   the observaton time).
   

.. _Examples:

Examples
   To look up the pointing direction from antenna 0 for field 'Titan'
   in the POINTING table based on the first timestamp in the main
   table rows for this field, write this direction in the FIELD and
   SOURCE tables, and then recalculate the UVW coordinates for this
   field:
   
   ::
   
      fixplanets(vis='uid___A002_X1c6e54_X223.ms', field='Titan', fixuvw=True)
   
   To attach the ephemeris table 'Titan_55438-56292dUTC.tab' to field
   'Titan' and then recalculate the UVW coordinates for this field:
   
   ::
   
      fixplanets(vis='uid___A002_X1c6e54_X223.ms', field='Titan',
                 fixuvw=True, direction='Titan_55438-56292dUTC.tab')
   
   To set the directions for field 'Titan' in the FIELD and SOURCE
   table to the given direction and not recalculate the UVW
   coordinates; this can be useful for several purposes, among them
   preparing a concatenation of datasets. (Only fields with the same
   direction will be recognised as identical.):
   
   ::
   
      fixplanets(vis='uid___A002_X1c6e54_X223.ms', field='Titan',
                 fixuvw=False, direction='J2000 12h30m15 -02d12m00')




  
.. _Development:

Development
   No additional development details

